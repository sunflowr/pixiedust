(function(e){function t(t){for(var i,a,r=t[0],u=t[1],c=t[2],l=0,d=[];l<r.length;l++)a=r[l],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&d.push(s[a][0]),s[a]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);p&&p(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,a=1;a<n.length;a++){var r=n[a];0!==s[r]&&(i=!1)}i&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var i={},a={app:0},s={app:0},o=[];function r(e){return u.p+"js/"+({about:"about"}[e]||e)+"."+{about:"a4da2c8d"}[e]+".js"}function u(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={about:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var i="css/"+({about:"about"}[e]||e)+"."+{about:"7c1147d4"}[e]+".css",s=u.p+i,o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var c=o[r],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===i||l===s))return t()}var d=document.getElementsByTagName("style");for(r=0;r<d.length;r++){c=d[r],l=c.getAttribute("data-href");if(l===i||l===s)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var i=t&&t.target&&t.target.src||s,o=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=i,delete a[e],p.parentNode.removeChild(p),n(o)},p.href=s;var v=document.getElementsByTagName("head")[0];v.appendChild(p)})).then((function(){a[e]=0})));var i=s[e];if(0!==i)if(i)t.push(i[2]);else{var o=new Promise((function(t,n){i=s[e]=[t,n]}));t.push(i[2]=o);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=r(e);var d=new Error;c=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=s[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",d.name="ChunkLoadError",d.type=i,d.request=a,n[1](d)}s[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=i,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)u.d(n,i,function(t){return e[t]}.bind(null,i));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var p=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"310a":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));n("cb29"),n("fb6a"),n("ace4"),n("d3b7"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7");var i=n("9f12"),a=n("53fe"),s=function(){function e(){Object(i["a"])(this,e)}return Object(a["a"])(e,[{key:"nibbelize",value:function(e){for(var t=new Uint8Array(2*e.length),n=0,i=0;i<e.length;++i)t[n++]=e[i]>>>4&15,t[n++]=15&e[i];return t}},{key:"denibbelize",value:function(e){for(var t=new Uint8Array(e.length/2),n=0,i=0;i<e.length;i+=2)t[n++]=255&(e[i]<<4|e[i+1]);return t}},{key:"makeHeader",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=[];switch(e&&(i.push(240),i.push(125)),i.push(3),i.push(3),t){case o.uploadBootloader:i.push(126),i.push(1);break;case o.uploadApplication:i.push(126),i.push(2);break;case o.uploadEmuFW:i.push(126),i.push(3);break;case o.reset:i.push(127),i.push(0);break;case o.test:default:i.push(127);break}return void 0!==n&&i.push(255&n),new Uint8Array(i)}},{key:"makeFooter",value:function(e,t){var n=[t>>>4&15,15&t];return e&&n.push(247),new Uint8Array(n)}},{key:"calculateDataChecksum",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=0,i=0;i<t;++i)n=n+e[i]&255;return 255&n}},{key:"convertToSysEx",value:function(e,t,n,i){n*=2;for(var a=[],s=0;s<i.length;s+=n){var r=i.slice(s,s+n),u=new Uint8Array(r.length+(n-r.length));u.set(r),u.fill(0,r.length);var c=this.makeHeader(t,e,a.length),l=this.nibbelize(u),d=this.makeFooter(t,this.calculateDataChecksum(u)),p=new Uint8Array(c.length+l.length+d.length);p.set(c),p.set(l,c.length),p.set(d,c.length+l.length),a.push(p)}var v=this.makeHeader(t,o.reset),h=new Uint8Array(v.length+(t?1:0));return h.set(v),t&&h.set([247],v.length),a.push(h),a}}]),e}(),o={uploadBootloader:1,uploadApplication:2,uploadEmuFW:3,test:4,reset:5},r=new s},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-navigation-drawer",{attrs:{"mini-variant":!e.expandedMenu,app:"",permanent:""}},[n("v-list",{attrs:{dense:""}},[n("v-tooltip",{attrs:{disabled:e.expandedMenu,right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-list-item",e._g({attrs:{link:""},on:{click:function(t){e.expandedMenu=!e.expandedMenu}}},i),[n("v-list-item-action",[e.expandedMenu?e._e():n("v-icon",[e._v("mdi-arrow-expand-right")]),e.expandedMenu?n("v-icon",[e._v("mdi-arrow-expand-left")]):e._e()],1),n("v-list-item-content",[e.expandedMenu?n("v-list-item-title",[e._v("Collapse menu")]):e._e()],1)],1)]}}])},[n("span",[e._v("Expand menu")])]),e._l(this.$router.options.routes,(function(t){return n("v-tooltip",{key:t.meta.index,attrs:{disabled:e.expandedMenu,right:""},scopedSlots:e._u([{key:"activator",fn:function(i){var a=i.on;return[n("v-list-item",e._g({attrs:{link:"",to:t.path}},a),[n("v-list-item-action",[n("v-icon",[e._v(e._s(t.meta.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.meta.title))])],1)],1)]}}],null,!0)},[n("span",[e._v(e._s(t.meta.title))])])}))],2)],1),n("v-app-bar",{attrs:{app:"",dense:"",title:"",flat:"",color:"#303030"}},[n("v-toolbar-title",[e._v(e._s(e.currentRouteName))])],1),n("v-content",[n("v-container",[n("router-view")],1)],1)],1)},s=[],o={name:"App",data:function(){return{expandedMenu:!1,drawer:null}},created:function(){this.$vuetify.theme.dark=!0},mounted:function(){var e=this,t=n("bdb9"),i=t.ipcRenderer;i&&i.on("navigate",(function(t,n){e.$route.path!==n&&e.$router.push(n)})),this.$MIDI.$on("midi:initialized",this.midiInitialized),this.$MIDI.$on("midi:failed",this.midiFailed),this.$MIDI.$on("midi:connected",this.midiConnected),this.$MIDI.$on("midi:disconnected",this.midiDisconnected)},computed:{routes:function(){return this.$router.options.routes},currentRouteIcon:function(){return this.$route.meta.icon},currentRouteName:function(){return this.$route.meta.title}},methods:{midiInitialized:function(e){this.$Settings.midiInputDevice||(this.$Settings.midiInputDevice=this.$MIDI.inputDevices[0].id||"",this.midiInputDeviceChanged()),this.$Settings.midiOutputDevice||(this.$Settings.midiOutputDevice=this.$MIDI.outputDevices[0].id||"")},midiFailed:function(e){this.errorMessage={title:"Failed to initialize MIDI",text:e}},midiConnected:function(e){},midiDisconnected:function(e){e.port.id===this.$Settings.midiInputDevice&&(this.$Settings.midiInputDevice=this.$MIDI.inputDevices[0].id||""),e.port.id===this.$Settings.midiOutputDevice&&(this.$Settings.midiOutputDevice=this.$MIDI.outputDevices[0].id||"")},midiSysExReceived:function(e){},midiInputDeviceChanged:function(){},midiOutputDeviceChanged:function(){}}},r=o,u=n("2877"),c=n("6544"),l=n.n(c),d=n("7496"),p=n("40dc"),v=n("a523"),h=n("a75b"),f=n("132d"),m=n("8860"),b=n("da13"),g=n("1800"),y=n("5d23"),I=n("f774"),_=n("2a7f"),D=n("3a2f"),x=Object(u["a"])(r,a,s,!1,null,null,null),w=x.exports;l()(x,{VApp:d["a"],VAppBar:p["a"],VContainer:v["a"],VContent:h["a"],VIcon:f["a"],VList:m["a"],VListItem:b["a"],VListItemAction:g["a"],VListItemContent:y["a"],VListItemTitle:y["b"],VNavigationDrawer:I["a"],VToolbarTitle:_["a"],VTooltip:D["a"]});n("d4b8"),n("5363");var S=n("f309");i["a"].use(S["a"]);var C=new S["a"]({icons:{iconfont:"mdi"}}),M=(n("d3b7"),n("8c4f")),$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("DeviceInfo",{attrs:{data:e.deviceInfo}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("p",[e._v("Latest CPU firmware releases:")]),e.cpuReleasesInfo.success?e._e():n("h5",[e._v("No repository found")]),e.cpuReleasesInfo.empty?n("h5",[e._v("No Releases")]):e._e()]),e._l(e.cpuReleasesInfo.releases,(function(e,t){return n("v-col",{key:t,attrs:{cols:"12"}},[n("GitHubReleaseCard",{attrs:{index:t,release:e}})],1)}))],2),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("p",[e._v("Latest app releases:")]),e.appReleasesInfo.success?e._e():n("h5",[e._v("No repository found")]),e.appReleasesInfo.empty?n("h5",[e._v("No Releases")]):e._e()]),e._l(e.appReleasesInfo.releases,(function(e,t){return n("v-col",{key:t,attrs:{cols:"12"}},[n("GitHubReleaseCard",{attrs:{index:t,release:e}})],1)}))],2)],1)},k=[],O=(n("e25e"),n("bc3a")),E=n.n(O),V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.index<5?n("v-card",{staticClass:"mx-auto",attrs:{"max-width":"600px"}},[n("v-card-title",{staticClass:"headline"},[n("a",{attrs:{href:e.release.html_url,target:"_blank"}},[e._v(e._s(e.release.tag_name))])]),n("v-card-subtitle",[e._v(e._s(e.release.total.toLocaleString())+" downloads")]),n("v-card-text",[n("p",[e._v(e._s(e.release.body))]),n("v-expansion-panels",[n("v-expansion-panel",[n("v-expansion-panel-header",[e._v("Files")]),n("v-expansion-panel-content",[n("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[e._v("Name")]),n("th",{staticClass:"text-left"},[e._v("Downloads")])])]),n("tbody",e._l(e.release.assets,(function(t,i){return n("tr",{key:i},[n("td",[n("a",{attrs:{href:t.browser_download_url,target:"_blank"}},[e._v(e._s(t.name))])]),n("td",[e._v(e._s(t.download_count.toLocaleString()))])])})),0)]},proxy:!0}],null,!1,507436325)})],1)],1)],1)],1)],1):e._e()},R=[],j=(n("a9e3"),{name:"GitHubReleaseCard",props:{index:Number,release:Object}}),T=j,A=n("b0af"),P=n("99d9"),L=n("cd55"),N=n("49e2"),U=n("c865"),F=n("0393"),H=n("1f4f"),z=Object(u["a"])(T,V,R,!1,null,null,null),B=z.exports;l()(z,{VCard:A["a"],VCardSubtitle:P["a"],VCardText:P["b"],VCardTitle:P["c"],VExpansionPanel:L["a"],VExpansionPanelContent:N["a"],VExpansionPanelHeader:U["a"],VExpansionPanels:F["a"],VSimpleTable:H["a"]});var q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"mx-auto",attrs:{"max-width":"600px"}},[n("v-card-title",{staticClass:"headline"},[n("div",[e._v("RE-CPU info")]),n("v-spacer"),n("v-btn",{attrs:{color:"secondary","x-small":"",loading:e.syncing},on:{click:e.syncDeviceInfo}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-refresh")]),e._v("Sync ")],1)],1),n("v-card-subtitle"),n("v-card-text",[n("p",[e._v("Sorry this will work properly in next version")]),n("div",[e._v(e._s(e.receiveStatus))]),n("div",[e._v(e._s(e.uploadStatus))]),e.deviceInfo2?n("div",[n("ul",[n("li",[e._v("Hardware id: "+e._s(e.deviceInfo2.version.hwid))]),n("li",[e._v("App Version: "+e._s(e.deviceInfo2.version.major)+"."+e._s(e.deviceInfo2.version.minor)+"."+e._s(e.deviceInfo2.version.patch))]),n("li",[e._v("App Name: "+e._s(e.deviceInfo2.version.name))])])]):e._e()])],1)},G=[],W=(n("a630"),n("fb6a"),n("ace4"),n("3ca3"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("310a")),J={name:"DeviceInfo",props:{deviceInfo:Object},data:function(){return{syncing:!1,uploadStatus:"",receiveStatus:"",deviceInfo2:null}},mounted:function(){this.midiInDevice&&this.midiInDevice.addListener("sysex",void 0,this.onSysExReceive)},computed:{settings:{get:function(){return this.$Settings}},midiOutDevice:{get:function(){return this.$MIDI&&this.$MIDI.webMidi?this.$MIDI.webMidi.getOutputById(this.settings.midiOutputDevice):null}},midiInDevice:{get:function(){return this.$MIDI&&this.$MIDI.webMidi?this.$MIDI.webMidi.getInputById(this.settings.midiInputDevice):null}}},methods:{syncDeviceInfo:function(){this.syncing=!0,this.uploadSysEx([new Uint8Array([3,3,124,1])])},uploadSysEx:function(e){this.delayUploadSysEx(this.settings.uploadDelay,e,0)},delayUploadSysEx:function(e,t,n){var i=this;this.midiOutDevice&&n<t.length?(this.midiOutDevice.sendSysex(125,Array.from(t[n])),setTimeout((function(){i.delayUploadSysEx(e,t,n+1)}),e)):(this.midiOutDevice?this.uploadStatus="":this.uploadStatus="No active midi output device, aborting!",this.syncing=!1)},onSysExReceive:function(e){var t=e.data.slice(7,e.data.length-1);if(t.length%2==0){var n=W["b"].denibbelize(t);if(n.length>1){for(var i=n[n.length-1],a=0,s=0;s<n.length-1;++s)a=a+n[s]&255;i!=a&&(this.receiveStatus="Error when reciving, data is corrupt."),this.uploadStatus=n;var o=0,r={};r.magic=n[o++]<<24|n[o++]<<16|n[o++]<<8|n[o++],r.hwid=n[o++]<<24|n[o++]<<16|n[o++]<<8|n[o++],r.name=new TextDecoder("utf-8").decode(n.slice(o,o+24)),o+=24,r.major=n[o++],r.minor=n[o++],r.patch=n[o++],r.revision=n[o++],this.deviceInfo2={version:r}}}else this.receiveStatus="SysEx data length is uneven, the received data is most likely corrupt."}}},K=J,Q=n("8336"),X=n("2fa4"),Y=Object(u["a"])(K,q,G,!1,null,null,null),Z=Y.exports;l()(Y,{VBtn:Q["a"],VCard:A["a"],VCardSubtitle:P["a"],VCardText:P["b"],VCardTitle:P["c"],VIcon:f["a"],VSpacer:X["a"]});var ee={name:"Home",components:{GitHubReleaseCard:B,DeviceInfo:Z},mounted:function(){this.sendReq("https://api.github.com/repos/sunflowr/recpu/releases",this.cpuReleasesInfo),this.sendReq("https://api.github.com/repos/sunflowr/pixiedust/releases",this.appReleasesInfo)},data:function(){return{cpuReleasesInfo:{errorMessage:"",releases:[],grandTotal:0,success:!0,empty:!1},appReleasesInfo:{errorMessage:"",releases:[],grandTotal:0,success:!0,empty:!1},deviceInfo:{}}},methods:{sendReq:function(e,t){t.empty=!1,E.a.get(e).then((function(e){var n=e.data;t.grandTotal=0;for(var i=0;i<n.length;i++){var a=0;n[i].total=0;for(var s=0;s<n[i].assets.length;s++)a+=parseInt(n[i].assets[s].download_count);n[i].total=a,t.grandTotal+=a}t.releases=n,t.success=!0,0===e.data.length&&(t.empty=!0)})).catch((function(e){t.errorMessage=e.message,t.success=!1,t.empty=!1}))}}},te=ee,ne=n("62ad"),ie=n("0fd9"),ae=Object(u["a"])(te,$,k,!1,null,null,null),se=ae.exports;l()(ae,{VCol:ne["a"],VContainer:v["a"],VRow:ie["a"]}),i["a"].use(M["a"]);var oe,re=[{path:"/",name:"home",meta:{index:0,icon:"mdi-view-dashboard",title:"Home",accelerator:"CmdOrCtrl+I"},component:se},{path:"/midiupload",name:"midiupload",meta:{index:1,icon:"mdi-download",title:"Send to device",accelerator:"CmdOrCtrl+U"},component:function(){return n.e("about").then(n.bind(null,"73f1"))}},{path:"/sysextool",name:"sysextool",meta:{index:2,icon:"mdi-file-export",title:"SysEx Tool",accelerator:"CmdOrCtrl+C"},component:function(){return n.e("about").then(n.bind(null,"f752"))}},{path:"/settings",name:"settings",meta:{index:3,icon:"mdi-settings",title:"Settings",accelerator:"Cmd+,"},component:function(){return n.e("about").then(n.bind(null,"26d3"))}},{path:"/about",name:"about",meta:{index:4,icon:"mdi-information",title:"About"},component:function(){return n.e("about").then(n.bind(null,"f820"))}}],ue=new M["a"]({routes:re}),ce=ue,le=n("9f12"),de=(n("b0c0"),n("c62b")),pe=n.n(de);function ve(e){if(!ve.installed||oe!==e){ve.installed=!0,oe=e;var t=new e({data:function(){return{enabled:!1,webMidi:null,inputDevices:[],outputDevices:[]}},created:function(){var e=this;pe.a.enable((function(t){t?e.onMIDIFailure():e.onMIDISuccess()}),!0)},methods:{onMIDISuccess:function(){this.webMidi=pe.a,this.enabled=!0,this.updateDevices(),this.$emit("midi:initialized","WebMIDI enabled!"),pe.a.addListener("connected",this.onConnected),pe.a.addListener("disconnected",this.onDisconnected)},onMIDIFailure:function(){this.$emit("midi:failed","Failed to initialize WebMIDI")},onConnected:function(e){this.updateDevices(),this.$emit("midi:connected",e)},onDisconnected:function(e){this.updateDevices(),this.$emit("midi:disconnected",e)},updateDevices:function(){if(this.inputDevices.length=0,this.outputDevices.length=0,this.enabled){for(var e=0;e<this.webMidi.inputs.length;++e)this.inputDevices.push({id:this.webMidi.inputs[e].id,name:this.webMidi.inputs[e].name});for(var t=0;t<this.webMidi.outputs.length;++t)this.outputDevices.push({id:this.webMidi.outputs[t].id,name:this.webMidi.outputs[t].name})}}}});Object.defineProperty(e.prototype,"$MIDI",{get:function(){return t}})}}var he,fe=function e(t){Object(le["a"])(this,e),this.options=t};function me(e){if(!me.installed||he!==e){me.installed=!0,he=e;var t=new e({data:function(){return{midiInputDevice:null,midiOutputDevice:null,midiPort:1,uploadDelay:250}}});Object.defineProperty(e.prototype,"$Settings",{get:function(){return t}})}}fe.install=ve;var be=function e(t){Object(le["a"])(this,e),this.options=t};be.install=me,i["a"].config.productionTip=!1,i["a"].use(fe),i["a"].use(be),new i["a"]({vuetify:C,router:ce,render:function(e){return e(w)}}).$mount("#app")}});
//# sourceMappingURL=app.3a6ad2ed.js.map